# git

이 글은 https://learngitbranching.js.org/?locale=ko 사이트를 참고하여 쓰여졌습니다.

## Local

### git status

git status 명령어는 작업 디렉토리(working directory)와 스테이징 영역(staging area)의 상태를 확인하기 위해서 사용합니다.

이를 알기위해 git status를 한번 사용하여 결과를 보겠습니다

![gitStatus](./img/gitstatus.png)

현재 git status를 확인해 보면 Untracked file이라는 영역이 보일것입니다. 고친 파일이 없어 현재는 저것 밖에 뜨지 않지만 원래 3가지 영역이 있습니다.

- Changes to be committed: 이 영역은 스테이징 영역에 넘어가 있는 변경 내용을 보여줍니다.
- Changes not staged for commit: 이 영역은 아직 워킹 디렉토리에 있는 변경 내용을 보여줍니다.
- Untracked files: 이 영역도 아직 워킹 디렉토리에 있는 아직 한 번도 해당 Git 저장소가 관리한 적이 없는 새로운 파일을 보여줍니다.

스테이징 영역, 워킹 디렉토리라는 단어를 간략히 짚고 넘어가겠습니다.

워킹 디렉토리란 내가 수정하고 있는 파일이 있는 폴더를 의미합니다. 다시 말해 자신이 작업하는 영역이 워킹 디렉토리입니다.

스테이징 영역이란 커밋을 하기위해 git add 명령어를 통해 추가된 파일들이 있는 영역입니다

### add

git add 명령어는 커밋 하기 까지의 변경부분을 기록하는 것입니다.
add 명령어는 저장하는 것이 아닌 그저 어느 정도 바꿨는지 기록하는 것으로 아무리 많은 add 명령어를 실행해도 Git 저장소에 어떤 영향도 주지 않습니다.

먼저 첫번 째는 작업 한 것을 일부한 스테이징 영역에 추가하고 싶을 때 입니다

    git add <파일>

다음과 같이 일부만 추가 하고 싶을 때는 git add 뒤에 직접적으로 추가할 것을 입력해 주면 됩니다

    git add .

이렇게 add 뒤에 .을 적게되면 모든 수정사항을 스테이징 영역에 추가한다는 것입니다.

    git add -A

그리고 git add .과 비슷한 -A가 있습니다. 이 두가지의 차이점은 상위 디렉토리의 수정사항을 포함하냐 안하냐 입니다.
git add . 은 현재 디렉토리 하위 폴더로만 스테이징 영역에 추가하지만 git add -A는 루트 디렉토리부터 모두 추가하게 되는 것입니다.

마지막으로 -p 속성이 있다

    git add -p

이 옵션을 사용하면, 각 변경 사항을 터미널에서 직접 눈으로 하나씩 확인하면서 스테이징 영역으로 넘기거나 또는 제외할 수가 있습니다.

### commit

간단히 커밋이란 git add 명령어를 통한 기록을 저장하는 행위라고 생각합니다

현재 가르키고 있는 커밋, HEAD를 c0, 즉 이곳을 main 브랜치라고 가정하겠습니다. 만일 이 곳에서 코드가 다음과 같이 구성되어 있다고 생각해 봅시다

```js
const a = "a";
```

그런데 워킹 디렉토리에서 코드를 수정하였습니다

```js
const a = "a";
console.log(a);
```

그리고 이를 git add .으로 스테이징 영역으로 넘겼다고 해봅시다. 이 때 저희는 git commit 명령어를 사용할 수 있는 것입니다.

git commit 명령어는 git 저장소에 기록하는 행위로 git add와는 다르게 저장소에 영향을 줍니다.

    git commit

이렇게 된다면 HEAD, c0에서 c1이라는 새로운 커밋이 기록 되는 것입니다

![gitcommit](./img/gitcommit.png)

당연한 소리지만 이 때 c0와 c1, 두 커밋에 내용은 다릅니다. c0는 원래 적혀있던 내용, c1는 바꾸고 난 후 기록한 내용

그러면 이제 commit 명령어의 옵션에 대해 알아봅시다

    git commit -m "메세지"
    git commit -a
    git commit -am "메세지"

옵션이 매우 많기에 대표적인 것만 적어놓았습니다.

-m 옵션부터 알아보자면 massage를 의미하는 것으로 "메세지"와 함께 기록하는 것입니다. 내가 위에 코드처럼 콘솔로그를 추가 하였으므로
git commit -m "add: console.log"라고 한다면 이 메세지와 함께 기록되는 것입니다. 이 커밋이 어떤 커밋인지 알아보기 쉽도록 말이죠.

-a 이는 git add와 git commit을 합친 것 입니다.

-am 이 옵션은 -a,-m을 한번에 작업하는 옵션입니다

그렇다면 메세지를 적을 때 다른 사람 또한 이 커밋이 왜 나왔는지 알아보기 쉽게 메세지를 작성해 주어야 한다. 그렇기에 지금부터 커밋 메세지 작성 규칙에 대해 알아볼 것이다.

### git commit message rule

먼저 메세지를 적을 때 규칙으로는 다음과 같은 규칙이 있습니다.

- 제목과 본문을 빈 행으로 구분한다
- 제목을 50글자 내로 제한
- 제목 첫 글자는 대문자로 작성
- 제목 끝에 마침표 넣지 않기
- 제목은 명령문으로 사용하며 과거형을 사용하지 않는다
- 본문의 각 행은 72글자 내로 제한
- 어떻게 보다는 무엇과 왜를 설명한다

뿐만이나라 다음과 같은 type도 적어줘야 한다.

- FEAT : 새로운 기능의 추가
- FIX: 버그 수정
- DOCS: 문서 수정
- STYLE: 스타일 관련 기능(코드 포맷팅, 세미콜론 누락, 코드 자체의 변경이 없는 경우)
- REFACTOR: 코드 리펙토링
- TEST: 테스트 코트, 리펙토링 테스트 코드 추가
- CHORE: 빌드 업무 수정, 패키지 매니저 수정(ex .gitignore 수정 같은 경우)
